<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <title>TÃ¼m Ä°lanlar YÃ¶netimi</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.85em;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px 10px;
            text-align: left;
        }

        th {
            background-color: #007bff;
            color: white;
        }

        .durum-satildi {
            color: red;
        }

        .durum-aktif {
            color: green;
            font-weight: bold;
        }

        .ilan-baslik {
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h1>ğŸ¡ Ä°lan YÃ¶netimi (Toplam: {{ tum_ilanlar.count }})</h1>

    <p><a href="{% url 'ana_sayfa' %}">â† Ana Sayfaya Geri DÃ¶n</a> |
        <a href="/admin/emlak/ilan/add/">â• Yeni Ä°lan Ekle</a>
    </p>

    <table>
        <thead>
            <tr>
                <th>Ä°lan No</th>
                <th>BaÅŸlÄ±k</th>
                <th>MÃ¼lk Sahibi</th>
                <th>Konum / Tip</th>
                <th>Oda / BÃ¶lme</th>
                <th>Otopark/IsÄ±tma</th>
                <th>Fiyat (TL)</th>
                <th>Durum</th>
                <th>Kalkma Tarihi</th>
            </tr>
        </thead>
        <tbody>
            {% for ilan in tum_ilanlar %}
            <tr>
                <td><a href="{% url 'ilan_detay' pk=ilan.pk %}">{{ ilan.ilan_no }}</a></td>
                <td class="ilan-baslik">{{ ilan.baslik|truncatechars:30 }}</td>

                <td>
                    {% if ilan.mulk_sahibi %}
                    <a href="{% url 'musteri_detay' pk=ilan.mulk_sahibi.pk %}">{{ ilan.mulk_sahibi.ad_soyad }}</a>
                    {% else %}
                    -
                    {% endif %}
                </td>

                <td>{{ ilan.il }} / {{ ilan.ilce }} ({{ ilan.get_emlak_tipi_display }})</td>

                <td>
                    {% if ilan.oda_sayisi %} {{ ilan.oda_sayisi }} {% else %} {{ ilan.bolme_sayisi|default:"-" }} {%
                    endif %}
                </td>

                <td>
                    IsÄ±tma: {{ ilan.get_isitma_display|default:"-" }}<br>
                    Otopark: {{ ilan.get_otopark_display|default:"-" }}
                </td>

                <td>{{ ilan.fiyat|floatformat:0|default:"BelirtilmemiÅŸ" }}</td>
                <td
                    class="{% if ilan.durum == 'SatÄ±ldÄ±' or ilan.durum == 'KiralandÄ±' %}durum-satildi{% elif ilan.durum == 'Aktif' %}durum-aktif{% endif %}">
                    {{ ilan.get_durum_display }}
                </td>

                <td>
                    {% if ilan.yayindan_kaldirma_tarihi %}
                    {{ ilan.yayindan_kaldirma_tarihi|date:"d.m.Y" }}
                    {% else %}
                    -
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="9">Filtreleme kriterlerine uyan ilan bulunmamaktadÄ±r.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>

</html>